#!/usr/bin/perl

# TODO refresh
# TODO check http return codes
# TODO display success message after uploading
# TODO getline history
# TODO o - open in browser
# TODO c - open new wiki/projekt
# TODO RET - view page
# TODO projects api

use Mojo::Base -strict, -signatures;
use Mojo::UserAgent;
use App::pickaxe::Index;

our $VERSION = '0.01';

use Curses;

initscr;
keypad( stdscr, 1 );
noecho;
curs_set(0);
refresh;    # This is the necessary but undocumented initial refresh

eval { App::pickaxe::Index->new->run };

my $err;
if ($@) {
    $err = $@;
}

endwin;
if ( $err ) {
    warn $err;
}
exit 0;

__END__

=pod

=head1 NAME

pickaxe - the redmine editor

=head1 DESCRIPTION

Pickaxe is a terminal based programm to view and edit redmine wiki
pages.

=head1 DEFAULT BINDINGS

=over 4

=item s 

Search for wiki pages matching a pattern.

=item e

Edit wiki page under the cursor.

=item h 

Display this help.

=item q

Quit pickaxe.

=back

=head1 ENVIRONMENT

=over 4

=item REDMINE_APIKEY

This variable has to be set in order to access the redmine api. You can
access it by clicking on your account on your redmine wiki and search
for api key in the right margin.

=back
